<nav class="d-none navbar navbar-expand-lg py-lg-0 position-fixed w-100" id="navbar">
    <div class="container">
        <a class="navbar-brand d-flex py-lg-0" href="#">
            <img src="/assets/images/Logo-navbar.svg" alt="logo">
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav py-lg-7 mb-2 mb-lg-0 gap-lg-7">
                <li class="nav-item">
                    <a class="nav-link py-lg-3 px-lg-5" href="#">所有貼文</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link py-lg-3 px-lg-5" href="#">關於我們</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link p-lg-2" href="#">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M21 21L16.7 16.7M19 11C19 15.4183 15.4183 19 11 19C6.58172 19 3 15.4183 3 11C3 6.58172 6.58172 3 11 3C15.4183 3 19 6.58172 19 11Z" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </a>
                </li>
                <li class="nav-item border border-black" id="auth-button">
                    <a href="login.html" class="nav-link nav-item-btn py-lg-3 px-lg-5">登入/註冊</a>
                </li>
            </ul>
        </div>
    </div>
</nav>

<div class="search">
    <div class="search-bar flex-shrink-0 align-items-center">
        <div class="container d-flex justify-content-between">
            <a class="navbar-brand d-flex py-0" href="#">
                <img src="/assets/images/Logo-navbar.svg" alt="logo">
            </a>
            <ul class="search-form d-flex align-items-center py-7 gap-2">
                <li class="nav-item">
                    <div class="input-group rounded-3">
                        <!-- <label class="search-text" for="search">附近美味</label> -->
                        <input class="form-control py-2 px-5" type="text" name="search" id="search" placeholder="附近美味">
                        <a href="#" class="input-group-text py-2 ps-0 pe-5">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M21 21L16.7 16.7M19 11C19 15.4183 15.4183 19 11 19C6.58172 19 3 15.4183 3 11C3 6.58172 6.58172 3 11 3C15.4183 3 19 6.58172 19 11Z" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </a>
                    </div>
                </li>
                <li class="dropdown">
                    <button class="nav-link py-2 px-5 rounded-3 bg-white text-gray-900" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                        地理位置
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="ms-5">
                            <path d="M6 9L12 15L18 9" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>                            
                    </button>
                    <ul class="dropdown-menu">
                        <li><a class="dropdown-item" href="#">Action</a></li>
                        <li><a class="dropdown-item" href="#">Another action</a></li>
                        <li><a class="dropdown-item" href="#">Something else here</a></li>
                    </ul>
                </li>
                <li class="dropdown">
                    <button class="nav-link py-2 px-5 rounded-3 bg-white text-gray-900" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                        美食類型
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="ms-5">
                            <path d="M6 9L12 15L18 9" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>                            
                    </button>
                    <ul class="dropdown-menu">
                        <li><a class="dropdown-item" href="#">Action</a></li>
                        <li><a class="dropdown-item" href="#">Another action</a></li>
                        <li><a class="dropdown-item" href="#">Something else here</a></li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
    <div class="container close-btn justify-content-end">close</div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        // 向下滾動 - 隱藏 navbar & 向上滾動 - 顯示 navbar
        let lastScrollTop = 0;
        const navbar = document.getElementById('navbar');

        window.addEventListener('scroll', function () {
            let scrollTop = window.pageYOffset || document.documentElement.scrollTop;

            if (scrollTop > lastScrollTop) {
                navbar.style.top = "-88px";
            } else {
                navbar.style.top = "0";
            }
            lastScrollTop = scrollTop;
        });

        // 模擬登入後「登入/註冊」按鈕變成「我的帳號」下拉選單
        // 檢查 localStorage 中是否有「已登入」狀態
        let isLoggedIn = localStorage.getItem('loggedIn');

        const authButton = document.getElementById('auth-button');

        if (isLoggedIn) {
            // 如果已登入，替換為「我的帳號」下拉選單
            authButton.innerHTML = `
                <div class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle py-lg-3 px-lg-5" href="#" id="accountDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                        我的帳號
                    </a>
                    <ul class="dropdown-menu" aria-labelledby="accountDropdown">
                        <li><a class="dropdown-item" href="#">個人資料</a></li>
                        <li><a class="dropdown-item" href="#">設定</a></li>
                        <li><a class="dropdown-item" href="#" id="logout">登出</a></li>
                    </ul>
                </div>
            `;

            // 登出邏輯
            document.getElementById('logout').addEventListener('click', function () {
                localStorage.removeItem('loggedIn');
                window.location.reload();  // 刷新頁面以回到未登入狀態
            });
        } else {
            // 模擬登入，當點擊登入時儲存狀態
            authButton.addEventListener('click', function (e) {
                localStorage.setItem('loggedIn', true);
            });
        }
    });

    
</script>